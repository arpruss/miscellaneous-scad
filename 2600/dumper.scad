wallHeight = 20;
baseHeight = 2.5;
lidHeight = 2;
logoInset = 1.5;
wallBigHole = 40;
guideScrewHoleSpacing = 83;
guideScrewHoleDiameter = 2.25;
guideScrewHoleHeight = 10;
wireHoleDiameter = 3.2;
bottomScrewHeadDiameter = 5;
bottomScrewHeadInset = 1.5;
bottomScrewHoleDiameter = 2.75;
pcbMountScrewSpacingX = 45;
pcbMountScrewSpacingY = 30.7;
pcbMountScrewOffsetY = 12;
pillarScrewHoleDiameter = 3;
pillarDiameter = 8;


center_box_1 = [0.000108561,0.352642345];
size_box_1 = [96.508838711,102.100751898];
stroke_width_box_1 = 1.500000043;
color_box_1 = undef;
fillcolor_box_1 = [0.00000,1.00000,0.00000];
center_box_2 = [0.011527131,-34.857101656];
size_box_2 = [86.802690779,23.496389063];
stroke_width_box_2 = 0.041091974;
color_box_2 = [0.73333,0.00000,0.00000];
fillcolor_box_2 = [0.93333,0.13333,0.13333];
center_box_3 = [-24.363213523,13.175474417];
size_box_3 = [34.969304453,66.849625000];
stroke_width_box_3 = 0.000210203;
color_box_3 = undef;
fillcolor_box_3 = [0.00000,0.00000,0.00000];
center_box_4 = [-0.000000500,13.175474417];
size_box_4 = [9.715478833,66.849625000];
stroke_width_box_4 = 0.000210203;
color_box_4 = undef;
fillcolor_box_4 = [0.00000,0.00000,0.00000];
center_box_5 = [24.377829417,13.175474417];
size_box_5 = [34.940070667,66.849625000];
stroke_width_box_5 = 0.000210203;
color_box_5 = undef;
fillcolor_box_5 = [0.00000,0.00000,0.00000];
// paths for box_1
points_box_1_1 = [ [-16.556612228,51.050375949],[-16.536062454,48.034703223],[-16.616685450,45.451868734],[-16.820309869,42.092832461],[-17.199292762,38.105824410],[-17.805991182,33.639074588],[-18.692762181,28.840813001],[-19.911962811,23.859269655],[-20.662508235,21.346934519],[-21.515238435,18.846057847],[-22.476097490,16.375173639],[-23.551029476,13.952815895],[-24.745978472,11.597518615],[-26.066888554,9.327815801],[-27.519703800,7.162241453],[-29.110368288,5.119329572],[-30.843531811,3.216633715],[-32.725190709,1.470871877],[-34.763308877,-0.100678270],[-36.965850213,-1.480739051],[-39.340778612,-2.652032791],[-41.896057972,-3.597281818],[-44.639652188,-4.299208456],[-48.254419355,-4.808228678],[-48.254419355,-51.037966991],[-1.004073165,-51.037966991],[-1.004073165,-51.050375949],[1.004072001,-51.050375949],[1.004072001,-51.037966991],[48.254419355,-51.037966991],[48.254419355,-4.808228678],[44.639134116,-4.299208456],[41.895540021,-3.597281818],[39.340260758,-2.652032791],[36.965332470,-1.480739051],[34.762791303,-0.100678270],[32.724673403,1.470871877],[30.843014914,3.216633715],[29.109851980,5.119329572],[27.519187176,7.162241453],[26.066371601,9.327815801],[24.745461215,11.597518615],[23.550511978,13.952815895],[22.475579849,16.375173639],[21.514720788,18.846057847],[20.661990755,21.346934519],[19.911445710,23.859269655],[18.692266489,28.840813001],[17.805553579,33.639074588],[17.198937743,38.105824410],[16.820049743,42.092832461],[16.535980302,48.034703223],[16.534391355,50.278846822],[16.556087189,51.050375949],[-0.000008520,51.050375949],[-16.556612228,51.050375949] ];
points_box_1_2 = [ [-15.035258061,49.550209140],[15.034740960,49.550209140],[15.067582738,46.402900747],[15.430366796,40.455947314],[15.838715994,36.689835860],[16.453425341,32.532491729],[17.315786363,28.086807784],[18.467090585,23.455676884],[19.232879449,20.890679810],[20.104350359,18.331842826],[21.088817906,15.797841473],[22.193596684,13.307351293],[23.426001283,10.879047829],[24.793346297,8.531606623],[26.302946319,6.283703218],[27.962115939,4.154013155],[29.728332260,2.215666865],[31.652109166,0.428313994],[33.737923622,-1.190299099],[35.990252598,-2.622426056],[38.413573058,-3.850320517],[41.012361971,-4.856236125],[43.791096303,-5.622426521],[46.754253022,-6.131145345],[46.754253022,-49.537800658],[-46.754252546,-49.537800658],[-46.754252546,-6.131145345],[-43.791150706,-5.622400042],[-41.012436237,-4.856189989],[-38.413641883,-3.850261916],[-35.990300388,-2.622362556],[-33.737944497,-1.190238638],[-31.652106956,0.428363107],[-29.728320507,2.215695948],[-27.962117897,4.154013155],[-26.302947781,6.283703218],[-24.793347420,8.531606623],[-23.426002153,10.879047829],[-22.193597319,13.307351293],[-21.088818257,15.797841473],[-20.104350307,18.331842826],[-19.232878810,20.890679810],[-18.467089103,23.455676884],[-17.315807924,28.086807795],[-16.453506005,32.532491767],[-15.838879758,36.689835930],[-15.430625598,40.455947413],[-15.068019183,46.402900859],[-15.035258061,49.550209140],[-15.035258061,49.550209140] ];

// paths for box_2
points_box_2_1 = [ [-36.723899702,-8.160865219],[-28.435648456,-8.160865219],[-28.435648456,-11.324948510],[-43.401345390,-11.324948510],[-35.667835965,-1.955978594],[-32.992748446,1.503967073],[-32.456433986,2.334537606],[-32.073829164,3.131207820],[-31.844548763,3.893977468],[-31.768207567,4.622846302],[-31.850712575,5.446547632],[-32.098484395,6.185882266],[-32.511908219,6.841235173],[-33.091369237,7.412991323],[-33.643863696,7.792900123],[-34.241430901,8.063786617],[-34.884456069,8.226036021],[-35.573324417,8.280033552],[-36.519531335,8.183017706],[-37.349011363,7.892227146],[-38.062149767,7.408047335],[-38.659331812,6.730863740],[-39.141135053,5.722570391],[-39.444188373,4.298221073],[-42.772638240,4.298221073],[-42.584000352,5.493226085],[-42.308298855,6.563414901],[-41.946304232,7.508787522],[-41.498786965,8.329343948],[-40.972175699,9.032971609],[-40.387826993,9.642938476],[-39.745789003,10.159196395],[-39.046109883,10.581697216],[-38.288837788,10.910392786],[-37.474020874,11.145234953],[-35.671945208,11.333166469],[-34.177995153,11.207578889],[-32.815025704,10.830816315],[-31.583036912,10.202878995],[-30.482028825,9.323767177],[-29.610686406,8.300642568],[-28.987821967,7.173117758],[-28.613820775,5.941578459],[-28.489068096,4.606410385],[-28.549165095,3.703414589],[-28.729456110,2.806582260],[-29.029941165,1.915913401],[-29.450620285,1.031408010],[-30.049985272,0.059069717],[-30.886271115,-1.113592224],[-33.268064602,-4.059887052],[-36.723899702,-8.160865219] ];
points_box_2_2 = [ [-14.008255840,11.748194531],[-11.542736048,9.886729073],[-16.864147173,2.642212510],[-15.639607881,2.757271865],[-14.451599982,2.650175683],[-13.334861160,2.328887305],[-12.289776630,1.793406977],[-11.316731610,1.043734948],[-10.302786968,-0.081927609],[-9.578540488,-1.338571070],[-9.143992418,-2.726195684],[-8.999143006,-4.244801698],[-9.152403440,-5.818945573],[-9.611927597,-7.262494008],[-10.377329767,-8.575832220],[-11.448224235,-9.759345427],[-12.547628343,-10.609114623],[-13.743726084,-11.216569555],[-15.036132489,-11.581325006],[-16.424462590,-11.702995760],[-17.971511366,-11.558146349],[-19.401062892,-11.123598279],[-20.712731778,-10.399351799],[-21.906132633,-9.385407156],[-22.812210657,-8.274382383],[-23.459409275,-7.080146813],[-23.847728465,-5.802700445],[-23.977168200,-4.442043281],[-23.840730004,-3.107581397],[-23.431158588,-1.729972503],[-22.748068711,-0.309216847],[-21.791075131,1.154685323],[-14.008255840,11.748194531] ];
points_box_2_3 = [ [5.802188410,11.374258906],[7.042267384,11.315124914],[8.232265446,11.137722977],[9.372182595,10.842053159],[10.462018832,10.428115521],[11.501774157,9.895910125],[12.491448571,9.245437033],[13.431042072,8.476696308],[14.320554660,7.589688010],[15.663491810,5.853872516],[16.191074393,4.932344723],[16.622732939,3.975134396],[16.958467418,2.982289654],[17.198277798,1.953858620],[17.342164049,0.889889413],[17.390126140,-0.209569844],[17.293110707,-1.719699600],[17.002321056,-3.180518878],[16.518142155,-4.592027925],[15.840958973,-5.954226990],[15.003388309,-7.207854118],[14.025206569,-8.324721346],[12.906028536,-9.305213891],[11.645468994,-10.149716969],[10.241664034,-10.848473821],[8.773139429,-11.348062180],[7.239894928,-11.648097323],[5.641930285,-11.748194531],[4.212571537,-11.658113497],[2.814802798,-11.388127042],[1.447852892,-10.938620133],[0.110950640,-10.309977740],[-1.378440868,-9.364604540],[-2.666354814,-8.260514578],[-3.753175173,-6.997707359],[-4.639285923,-5.576182385],[-5.189404820,-4.320950228],[-5.582346582,-2.989441424],[-5.818111457,-1.580885789],[-5.896699694,-0.094513135],[-5.841040910,1.075629218],[-5.674096640,2.203684404],[-5.395915005,3.289556119],[-5.006544126,4.333148057],[-4.506032124,5.334363916],[-3.894427120,6.293107390],[-3.171777234,7.209282176],[-2.338130590,8.082791969],[-1.482718948,8.836877858],[-0.580741962,9.493402383],[0.367752246,10.052269242],[1.362715556,10.513382130],[2.404099847,10.876644743],[3.491856996,11.141960775],[4.625938884,11.309233924],[5.806297390,11.378367885],[5.802188410,11.374258906] ];
points_box_2_4 = [ [31.813410306,11.374258906],[33.053488412,11.315124914],[34.243485853,11.137722977],[35.383402630,10.842053159],[36.473238744,10.428115521],[37.512994193,9.895910125],[38.502668978,9.245437033],[39.442263099,8.476696308],[40.331776556,7.589688010],[41.674713293,5.853872516],[42.202295452,4.932344723],[42.633953512,3.975134396],[42.969687505,2.982289654],[43.209497462,1.953858620],[43.353383413,0.889889413],[43.401345390,-0.209569844],[43.304329957,-1.719699600],[43.013540306,-3.180518878],[42.529361405,-4.592027925],[41.852178223,-5.954226990],[41.014607559,-7.207854118],[40.036425819,-8.324721346],[38.917247786,-9.305213891],[37.656688244,-10.149716969],[36.252883284,-10.848473821],[34.784358679,-11.348062180],[33.251114178,-11.648097323],[31.653149535,-11.748194531],[30.223791903,-11.658113497],[28.826023041,-11.388127042],[27.459072514,-10.938620133],[26.122169890,-10.309977740],[24.632779209,-9.364604540],[23.344867082,-8.260514578],[22.258048542,-6.997707359],[21.371938619,-5.576182385],[20.821819722,-4.320950228],[20.428877960,-2.989441424],[20.193113085,-1.580885789],[20.114524848,-0.094513135],[20.170183621,1.075629218],[20.337127819,2.203684404],[20.615309257,3.289556119],[21.004679754,4.333148057],[21.505191126,5.334363916],[22.116795190,6.293107390],[22.839443762,7.209282176],[23.673088660,8.082791969],[24.528500308,8.836877858],[25.430477329,9.493402383],[26.378971636,10.052269242],[27.373935137,10.513382130],[28.415319743,10.876644743],[29.503077363,11.141960775],[30.637159907,11.309233924],[31.817519285,11.378367885],[31.813410306,11.374258906] ];
points_box_2_5 = [ [-16.490211548,-0.226005760],[-17.330028276,-0.302346899],[-18.105125358,-0.531627292],[-18.815502545,-0.914232403],[-19.461159590,-1.450547698],[-20.003509948,-2.096204743],[-20.391379689,-2.806581930],[-20.624383843,-3.581679011],[-20.702137444,-4.421495740],[-20.624383843,-5.256691024],[-20.391379689,-6.030247404],[-20.003509948,-6.742165623],[-19.461159590,-7.392446427],[-18.814667867,-7.928760606],[-18.101529670,-8.311365841],[-17.321359782,-8.540646854],[-16.473772985,-8.616988365],[-15.633956257,-8.540646854],[-14.858859176,-8.311365841],[-14.148481988,-7.928760606],[-13.502824944,-7.392446427],[-12.966509649,-6.745247399],[-12.583904537,-6.042574672],[-12.354624145,-5.284427749],[-12.278283006,-4.470806135],[-12.354624145,-3.602481835],[-12.583904538,-2.809663995],[-12.966509649,-2.092352616],[-13.502824944,-1.450547698],[-14.154517093,-0.921167422],[-14.870159199,-0.540873487],[-15.648980829,-0.309281174],[-16.490211548,-0.226005760] ];
points_box_2_6 = [ [5.761098619,8.210175615],[3.897384161,8.026738708],[3.035568098,7.797370254],[2.220510267,7.476170846],[1.452258757,7.063092272],[0.730861659,6.558086317],[0.056367062,5.961104766],[-0.571176944,5.272099406],[-1.420946553,4.046980305],[-2.028402394,2.738265190],[-2.393158755,1.345568845],[-2.514829923,-0.131493948],[-2.359899762,-1.901210423],[-1.894852965,-3.505659714],[-1.545915679,-4.245788707],[-1.119305058,-4.944456356],[-0.032871569,-6.217214885],[1.247657070,-7.252733198],[2.623724684,-7.992389135],[4.095331520,-8.436182698],[5.662477827,-8.584113885],[6.799697921,-8.510854522],[7.893771254,-8.290819622],[8.944698321,-7.923623968],[9.952479619,-7.408882344],[10.902474387,-6.754814154],[11.730733949,-6.000969604],[12.437258555,-5.147733664],[13.022048452,-4.195491302],[13.442727973,-3.259300095],[13.743213653,-2.281118768],[13.923505242,-1.260561610],[13.983602494,-0.197242906],[13.835671306,1.492343596],[13.391877744,3.053646208],[12.652221806,4.486279961],[11.616703494,5.789859885],[10.400060609,6.821524542],[9.018150541,7.568113885],[7.470587824,8.029627917],[5.756986994,8.206066635],[5.761098619,8.210175615] ];
points_box_2_7 = [ [31.772317869,8.210175615],[29.908603452,8.026738708],[29.046787488,7.797370254],[28.231729848,7.476170846],[27.463478653,7.063092272],[26.742082025,6.558086317],[26.067588084,5.961104766],[25.440044952,5.272099406],[24.590275756,4.046980305],[23.982820824,2.738265190],[23.618065373,1.345568845],[23.496394619,-0.131493948],[23.651323953,-1.901210423],[24.116368931,-3.505659714],[24.465305245,-4.245788707],[24.891915019,-4.944456356],[25.978347681,-6.217214885],[27.258876320,-7.252733198],[28.634943934,-7.992389135],[30.106550770,-8.436182698],[31.673697077,-8.584113885],[32.810917171,-8.510854522],[33.904990504,-8.290819622],[34.955917571,-7.923623968],[35.963698869,-7.408882344],[36.913693637,-6.754814154],[37.741953199,-6.000969604],[38.448477805,-5.147733664],[39.033267702,-4.195491302],[39.453947223,-3.259300095],[39.754432903,-2.281118768],[39.934724492,-1.260561610],[39.994821744,-0.197242906],[39.846890556,1.492343596],[39.403096994,3.053646208],[38.663441056,4.486279961],[37.627922744,5.789859885],[36.411279900,6.821524542],[35.029370121,7.568113885],[33.481808190,8.029627917],[31.768208890,8.206066635],[31.772317869,8.210175615] ];

// paths for box_3
points_box_3_1 = [ [-17.484652227,-28.353390485],[-17.484652227,-23.281969362],[-16.883005602,-23.179697458],[-13.594792264,-22.378230284],[-11.859901085,-21.813348572],[-10.292535492,-21.207285902],[-8.054226347,-20.134524438],[-5.882024941,-18.858144928],[-3.778434941,-17.380374698],[-1.745960011,-15.703441072],[0.212896185,-13.829571375],[2.095629982,-11.760992933],[3.899737715,-9.499933070],[5.622715719,-7.048619112],[6.531047728,-5.500879966],[7.408363016,-3.671107767],[8.223049229,-1.631594201],[8.943494016,0.545369045],[9.720010693,3.451011682],[10.403659944,6.639655250],[10.991202644,10.083346975],[11.479399667,13.754134084],[11.865011888,17.624063802],[12.144800181,21.665183355],[12.315525420,25.849539971],[12.374846940,33.424812500],[14.929749583,33.424812500],[17.484652227,33.424812500],[17.425600833,25.647972792],[17.256562490,14.577604059],[16.907436354,6.384319013],[16.648367897,3.105534721],[16.323910532,0.232763570],[15.927275271,-2.338413702],[15.451673128,-4.712416354],[14.963052547,-6.647249925],[14.373079484,-8.549201335],[13.687432720,-10.406017215],[12.911791039,-12.205444197],[12.051833220,-13.935228910],[11.113238046,-15.583117986],[10.101684299,-17.136858056],[9.022850760,-18.584195750],[6.559507369,-21.241171977],[3.818094940,-23.813511231],[1.813162328,-25.385904566],[-0.238192977,-26.832772469],[-2.329883619,-28.150932679],[-4.455822246,-29.337202935],[-6.609921503,-30.388400975],[-8.786094036,-31.301344537],[-10.978252492,-32.072851361],[-13.180309515,-32.699739184],[-15.505768725,-33.185014762],[-17.254971266,-33.424812500],[-17.484652227,-33.424812500],[-17.484652227,-28.353390485] ];

// paths for box_4
points_box_4_1 = [ [-4.857739417,0.000000000],[-4.857739417,33.424812500],[0.000000000,33.424812500],[4.857739417,33.424812500],[4.857739417,0.000000000],[4.857739417,-33.424812500],[0.000000000,-33.424812500],[-4.857739417,-33.424812500],[-4.857739417,0.000000000] ];

// paths for box_5
points_box_5_1 = [ [15.954777167,-33.278395777],[14.193272530,-32.953622071],[12.408808686,-32.515001877],[8.807655118,-31.318561881],[7.009291267,-30.571912007],[5.224619951,-29.733755501],[1.733006670,-27.805262445],[-1.593881238,-25.577762422],[-3.172645838,-24.365847207],[-6.115001650,-21.773611190],[-7.460266992,-20.404460315],[-8.709373375,-18.994067480],[-9.853157864,-17.548017649],[-10.759567753,-16.237304163],[-11.626281176,-14.799854035],[-13.205581770,-11.624831249],[-14.520985950,-8.183124084],[-15.502420016,-4.634907333],[-15.988225253,-2.128481514],[-16.399046028,0.722711992],[-16.738088293,3.971968986],[-17.008557999,7.672585267],[-17.356603539,16.641078898],[-17.470035333,33.424812500],[-14.929749583,33.424812500],[-12.389463833,33.424812500],[-12.389463833,29.791394462],[-12.275064787,23.724342932],[-11.937882305,17.979728674],[-11.386938370,12.607381880],[-10.631254966,7.657132742],[-9.679854076,3.178811453],[-8.541757685,-0.777751797],[-7.225987775,-4.162726814],[-6.504294621,-5.625296800],[-5.741566331,-6.926283407],[-3.777380427,-9.720480815],[-1.568707562,-12.396421654],[0.796718315,-14.855610773],[3.231163254,-16.999553021],[4.734520611,-18.123446497],[6.323894612,-19.159813123],[7.985033482,-20.102195672],[9.703685445,-20.944136921],[11.465598726,-21.679179646],[13.256521547,-22.300866620],[15.062202133,-22.802740620],[17.470035333,-23.281969362],[17.470035333,-28.353390485],[17.470035333,-33.424812500],[17.135787208,-33.416068569],[15.954777167,-33.278395777] ];

module polygon_box_1() {
 render(convexity=4) {
    difference() {
      polygon(points=points_box_1_1);
      polygon(points=points_box_1_2);
    }
 }
}

module polygon_box_2() {
 render(convexity=4) {
    difference() {
      union() {
        polygon(points=points_box_2_1);
        polygon(points=points_box_2_2);
        polygon(points=points_box_2_3);
        polygon(points=points_box_2_4);
      }
      union() {
        polygon(points=points_box_2_5);
        polygon(points=points_box_2_6);
        polygon(points=points_box_2_7);
      }
    }
 }
}

module polygon_box_3() {
 render(convexity=4) {
    polygon(points=points_box_3_1);
 }
}

module polygon_box_4() {
 render(convexity=4) {
    polygon(points=points_box_4_1);
 }
}

module polygon_box_5() {
 render(convexity=4) {
    polygon(points=points_box_5_1);
 }
}

/*
color(fillcolor_box_2) linear_extrude(height=height_box) translate(center_box_2) polygon_box_2();
color(fillcolor_box_3) linear_extrude(height=height_box) translate(center_box_3) polygon_box_3();
color(fillcolor_box_4) linear_extrude(height=height_box) translate(center_box_4) polygon_box_4();
color(fillcolor_box_5) linear_extrude(height=height_box) translate(center_box_5) polygon_box_5();
*/

boxShift = [0,size_box_1[1]/2-center_box_1[1]];
module walls() {
    difference() {
        translate(boxShift+center_box_1) polygon_box_1();
        square([wallBigHole, 4],center=true);
    }
}

module lid() {
    translate(boxShift+center_box_1) polygon(points=points_box_1_1);
}

module logo() {
translate(boxShift+center_box_2) polygon_box_2();
translate(boxShift+center_box_3) polygon_box_3();
translate(boxShift+center_box_4) polygon_box_4();
translate(boxShift+center_box_5) polygon_box_5();
}

nudge = 0.01;
$fn = 16;

pillarPositions = [ [-size_box_1[0]/2+5.5,10],
    [size_box_1[0]/2-5.5,10],
    [-11.5,size_box_1[1]-5],
    [11.5,size_box_1[1]-5] ];

module bottom() {
    difference() {
        linear_extrude(height=wallHeight+baseHeight) {
            walls();
            for (s=[-1,1]) translate([s*guideScrewHoleSpacing/2-5,0,0]) square([10,3]);
        }
        for (s=[-1,1]) translate([s*guideScrewHoleSpacing/2,0,guideScrewHoleHeight]) rotate([90,0,0]) cylinder(d=guideScrewHoleDiameter,h=10,center=true);
        translate([0,size_box_1[1],wallHeight+baseHeight-wireHoleDiameter/2]) 
        rotate([90,0,0]) {
        cylinder(d=wireHoleDiameter,h=10,center=true);
        translate([0,wireHoleDiameter/2,0]) cube([wireHoleDiameter,wireHoleDiameter,10],center=true);
        }
    }

    difference() {
        linear_extrude(height=baseHeight) lid();
        for (x=[-pcbMountScrewSpacingX/2,pcbMountScrewSpacingX/2]) for(y=[pcbMountScrewOffsetY,pcbMountScrewOffsetY+pcbMountScrewSpacingY]) translate([x,y,-nudge]) {
            cylinder(d=bottomScrewHeadDiameter,h=bottomScrewHeadInset);
            cylinder(d=bottomScrewHoleDiameter,h=10);
        }
    }
    
    linear_extrude(height=baseHeight+wallHeight) intersection() {
        lid();
        union() {
            for (x=pillarPositions) translate(x) difference() {
                circle(d=pillarDiameter);
                circle(d=pillarScrewHoleDiameter);
            }
        }
    }
}

module top() {
    difference() {
        linear_extrude(height=lidHeight) lid();
        translate([0,0,lidHeight-logoInset]) linear_extrude(height=lidHeight) logo();
        for (x=pillarPositions) translate(x) cylinder(d=pillarScrewHoleDiameter+1,h=10,center=true);
    }
}

bottom();
//top();